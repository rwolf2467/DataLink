<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DataLink - Download | Avocloud.net</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" />
    <link rel="shortcut icon" href="./assets/images/logo.png" type="image/x-icon" />
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/style.css') }}" />
    <style>
        .highlight {
            background: #0d1117;
            color: #e6edf3;
            padding: 2rem;
            margin: 0;
            border-radius: 0;
            border: none;
            font-family: 'JetBrains Mono', 'Fira Code', monospace;
            font-size: 0.95rem;
            line-height: 1.6;
            overflow-x: auto;
            text-align: left;
        }

        .highlight pre {
            margin: 0;
            padding: 0;
            background: transparent;
        }

        .highlight .linenos {
            padding-right: 16px;
            color: #6e7681;
            user-select: none;
            text-align: right;
            border-right: 1px solid #30363d;
            padding-left: 8px;
            margin-right: 16px;
        }
    </style>
</head>

<body>
    <div id="gradientbar"></div>
    <div id="particles-js"></div>

    <div class="container">
        <main>
            <section style="margin-top: 5vh" id="download">
                <div class="section-header">
                    <div class="section-title">DOWNLOAD</div>
                    <h2>Download-Page</h2>
                </div>

                <div
                    style="margin: 0 -20px; background: var(--card-background); border: 1px solid var(--border-color); border-radius: 8px; overflow: hidden;">
                    <div style="padding: 2rem; text-align: center; background: rgba(0,0,0,0.2);">
                        <p><b>File:</b> {{ zip_name }}</p>
                        <p><b>Size:</b> {{ file_size|round(2) }} MB</p>
                    </div>

                    {% if is_gallery and image_files %}
                    <div
                        style="padding: 2rem; display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; background: #0a0a0a;">
                        {% for img in image_files %}
                        <div
                            style="background: rgba(255,255,255,0.05); padding: 0.75rem; border-radius: 8px; text-align: center;">
                            <img src="{{ url_for('download_file', zip_name=img) }}" alt="Preview"
                                style="width: 100%; height: 150px; object-fit: cover; border-radius: 4px; margin-bottom: 0.5rem;" />
                            <p style="font-size: 0.8rem; color: var(--text-secondary); word-break: break-all;">{{ img }}
                            </p>
                        </div>
                        {% endfor %}
                    </div>

                    {% elif is_image %}
                    <div style="padding: 2rem; background: #0a0a0a; text-align: center;">
                        <img src="{{ url_for('download_file', zip_name=zip_name) }}" alt="Preview"
                            style="max-height: 60vh; max-width: 100%; border-radius: 8px;" />
                    </div>

                    {% elif is_video %}
                    <div style="padding: 2rem; background: #0a0a0a; text-align: center;">
                        <video controls style="max-width: 100%; max-height: 60vh; border-radius: 8px;">
                            <source src="{{ url_for('download_file', zip_name=zip_name) }}" type="{{ mime_type }}">
                            Your browser does not support the video tag.
                        </video>
                    </div>

                    {% elif is_text and highlighted_content %}
                    <div
                        style="background: #0d1117; padding: 2rem; border: 1px solid #30363d; border-radius: 0; margin: 0; text-align: left; overflow-x: auto;">
                        <pre
                            style="margin: 0; padding: 0; background: transparent; white-space: pre-wrap;">{{ highlighted_content | safe }}</pre>
                    </div>

                    {% endif %}

                    <div style="padding: 1.5rem; text-align: center; background: rgba(0,0,0,0.2);">
                        <a class="submit-btn" href="{{ url_for('download_file', zip_name=zip_name) }}" role="button"
                            style="display: inline-block; padding: 0.75rem 2rem;">
                            <i class="fa-solid fa-download"></i> Download File
                        </a>
                    </div>
                </div>
            </section>

            <footer style="margin-top: 15vh"></footer>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/particles.js/2.0.0/particles.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>

</html>